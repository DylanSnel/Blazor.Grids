@using Excubo.Blazor.Grids.__Internal
@using System.Globalization

<CascadingValue Value="this" IsFixed="true">
    @if (Grid.AspectRatio == null)
    {
        <div style="border: 1px solid black; @column @row">
            @ChildContent
        </div>
    }
    else
    {
        var padding_bottom = 100.0 / Grid.AspectRatio.Value * actual_row_span / actual_column_span;
        var padding_bottom_s = padding_bottom.ToString(CultureInfo.InvariantCulture) + "%";
        <div style="@column @row padding-bottom: @padding_bottom_s; width: 100%; height: 100%; position: relative" @ref="Area">
            <div style="display: grid; grid-template-rows: auto 1fr; border: 1px solid black; width: 100%; height: 100%; position: absolute">
                <Header />
                <div style="height: 100%; width: 100%; grid-row: 2">
                    @ChildContent
                </div>
            </div>
        </div>
    }
</CascadingValue>

@code {
    internal ElementReference Area;
}
